Опис
Цей проект розроблено в рамках дисципліни «Захист інформації» для демонстрації уразливості SQL Injection та методів захисту від неї. Програма емулює роботу веб-застосунку з базою даних студентів, демонструючи різницю між небезпечною обробкою даних (конкатенація рядків) та безпечною (параметризовані запити).

Функціонал
Програма виконує наступні функції, реалізовані у файлі techtask.py:

Ініціалізація БД: Створення тестової бази даних SQLite в пам'яті з таблицями students (користувачі) та secrets (конфіденційна інформація).


Вразливий пошук: Реалізація функції, що використовує пряму вставку змінних у SQL-запит (f-strings), що робить систему вразливою до ін'єкцій.


Захищений пошук: Реалізація функції з використанням плейсхолдерів (?), що нейтралізує спроби злому.

Демонстрація атак: Автоматичне виконання сценаріїв злому:

Легітимний пошук користувача.

Атака на обхід авторизації / витік даних (' OR '1'='1).

Атака UNION для крадіжки даних з інших таблиць (secrets).

Системні Вимоги
Python 3.8+ (тестувалося на Python 3.10 )

Бібліотека sqlite3 (входить у стандартний пакет Python)

Запуск Програми
Для запуску основної демонстрації виконайте команду в терміналі:

Bash

python techtask.py
Також доступний додатковий скрипт для покрокового аналізу (Step 3):

Bash

python step3.py
Інструкція з Використання
Програма працює в автоматичному режимі та виводить результати тестів у консоль:

Тест 1 (Звичайний пошук):

Шукає студента "Роман Гліб".

Очікуваний результат: В обох версіях коректно відображаються дані студента (Email: hlib.roman@hneu.net).

Тест 2 (SQL-ін'єкція ' OR '1'='1):

Емулює введення шкідливого коду, що робить умову пошуку завжди істинною.


Вразлива версія: Виводить список усіх користувачів (Витік даних).


Захищена версія: Не знаходить записів, сприймаючи ін'єкцію як звичайний текст.

Тест 3 (UNION-атака):

Емулює спробу об'єднати результати з таблицею secrets.

Вразлива версія: Виводить секретний ключ (XYZ-999-SECRET).

Захищена версія: Блокує атаку, результатів не знайдено.

Технічний опис вразливості та захисту
Вразливий код (Vulnerable)
Використовує конкатенацію рядків:

Python

sql = f"SELECT * FROM students WHERE name LIKE '{search_query}'"
При введенні ' OR '1'='1, запит перетворюється на логічне "ІСТИНА" для всіх рядків, що призводить до компрометації бази.

Безпечний код (Secure)
Використовує параметризацію:

Python

sql = "SELECT * FROM students WHERE name LIKE ?"
cursor.execute(sql, (search_query,))
База даних чітко розмежовує SQL-команду та дані користувача. Введений пейлоад інтерпретується виключно як рядковий літерал, а не як частина команди.

Висновок
У ході роботи було створено ПЗ, яке наочно показує, як використання параметризованих запитів повністю усуває загрозу SQL-ін'єкцій, забезпечуючи конфіденційність та цілісність даних.